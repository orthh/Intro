version: "3"
services:
    nginx:
        build:
            context: ./frontend
        ports:
            - 80:80
        depends_on:
            - spring

    spring:
        build:
            context: ./backend
        ports:
            - 8081:8081
        environment: 
            - SPRING_DATASOURCE_DRIVERCLASSNAME=${SPRING_DATASOURCE_DRIVERCLASSNAME}
            - SPRING_DATASOURCE_URL=${SPRING_DATASOURCE_URL}
            - SPRING_DATASOURCE_USERNAME=${SPRING_DATASOURCE_USERNAME}
            - SPRING_DATASOURCE_PASSWORD=${SPRING_DATASOURCE_PASSWORD}
            - JWT_SECRETKEY=${JWT_SECRETKEY}
            - JWT_TOKEN_ACCESSEXPIRATIONTIME=${JWT_TOKEN_ACCESSEXPIRATIONTIME}
            - JWT_TOKEN_REFRESHEXPIRATIONTIME=${JWT_TOKEN_REFRESHEXPIRATIONTIME}